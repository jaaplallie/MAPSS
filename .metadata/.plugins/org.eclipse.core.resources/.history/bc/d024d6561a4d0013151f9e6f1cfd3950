package GraphicalGridBuilder;

import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JPanel;

public class GraphicalGridTarget{

	JPanel targetContainer;
	JButton returnButton;
	GraphicalGridObject[] targetPossibilities = new GraphicalGridObject[0];
	int currentlyDisplayedPossibility = 0;
	
	public GraphicalGridTarget(GraphicalGridObject[] possibilities){
		targetPossibilities = possibilities;
		targetContainer = new JPanel(new BorderLayout());
		returnButton = new JButton("");
		targetContainer.add(returnButton);
	}
	
	public JPanel getButton(){
		returnButton.setText(targetPossibilities[currentlyDisplayedPossibility].getTextualIcon());
		if(targetPossibilities.length == 1){
			returnButton.setIcon(targetPossibilities[0].getImageIcon());
			returnButton.setEnabled(false);
		}
		returnButton.addActionListener(new ActionListener(){
			@Override
			public void actionPerformed(ActionEvent arg0) {
				System.out.println("displaying possibility " + currentlyDisplayedPossibility + " of " + (targetPossibilities.length-1));
				
				if(currentlyDisplayedPossibility == (targetPossibilities.length-1)){
					currentlyDisplayedPossibility = 0;
					returnButton.setIcon(targetPossibilities[currentlyDisplayedPossibility].getImageIcon());
				}
				else{
					currentlyDisplayedPossibility++;
					//returnButton.setText(targetPossibilities[currentlyDisplayedPossibility].getTextualIcon());
					returnButton.setIcon(targetPossibilities[currentlyDisplayedPossibility].getImageIcon());
				}
			}	
		});
		return targetContainer;
	}
	
	public String getPossibilitiesString(){
		String returnVal = "";
		
		for(int i = 0; i < targetPossibilities.length; i++){
			returnVal += targetPossibilities[i].getTextualIcon();
			if(targetPossibilities.length > 1 && i != targetPossibilities.length){
				returnVal += ",";
			}
		}
		
		return returnVal;
	}
}
